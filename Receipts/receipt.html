<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipts.html</title>
</head>

<body>
    <p>These are your receipts:</p>


    <script>

        function makeText(words, element) {
            var text = document.createTextNode(words);
            element.appendChild(text)
        }

        var para = document.createElement("p");
        document.body.appendChild(para);
        para.id = "para"

        function getReceipts() {
            fetch("./test").then(function (data) {
                return data.text()
            }).then(function (result) {
                var obj = result;
                console.log(obj);
                makeText(obj, para)
            })
        } 
        getReceipts()

        var button = document.createElement("button");
        document.body.appendChild(button);
        button.id = "button"
        makeText("Get Receipts", button)

        document.getElementById("button").addEventListener("click", function () {
            var value = document.getElementById("input").value
            console.log(value)
            fetch("./postInfo").then(function (data) {
                return data.text()
            }).then(function (result) {
                var obj = result;
                console.log(JSON.parse(obj));
            })

            var data = value
            fetch("./postInfo", {
                method: 'POST',
                body: JSON.stringify(value)
            }).then(data => {
                return data.text()
            }).then(result => {
                console.log(result)
            })
        })

        var count = 0
        document.getElementById("button").addEventListener("click", function () {
            fetch("./getInfo").then(function (data) {
                return data.text()
            }).then(function (result) {
                var obj = result;
                console.log("69: " + JSON.parse(obj));
                var text = JSON.parse(obj);
                count++;
                var para = document.createElement("p");
                document.body.appendChild(para);
                para.id = "para" + count
                var id = document.getElementById("para" + count)
                makeText(text, id)
            })
        })
    </script>
</body>

</html>